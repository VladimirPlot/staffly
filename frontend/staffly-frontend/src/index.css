@import "tailwindcss";
@import "react-phone-number-input/style.css";

@layer base {
  :root {
    --staffly-bg: #f8fafc;
    --staffly-surface: #ffffff;
    --staffly-border: #e4e4e7;
    --staffly-muted: #71717a;
    --staffly-icon: #52525b;
  }

  .dark {
    --staffly-bg: #0b0b0c;
    --staffly-surface: #18181b;
    --staffly-border: #27272a;
    --staffly-muted: #a1a1aa;
    --staffly-icon: #d4d4d8;
  }
}

/* ===== animations ===== */
@keyframes shimmer {
  100% {
    transform: translateX(100%);
  }
}

@keyframes dashboard-jiggle {
  0%,
  100% {
    transform: rotate(-0.6deg);
  }
  50% {
    transform: rotate(0.6deg);
  }
}

@layer utilities {
  .bg-surface {
    background-color: var(--staffly-surface);
  }

  .border-subtle {
    border-color: var(--staffly-border);
  }

  .text-muted {
    color: var(--staffly-muted);
  }

  .text-icon {
    color: var(--staffly-icon);
  }

  .dashboard-jiggle {
    animation: dashboard-jiggle 0.9s ease-in-out infinite;
    transform-origin: center;
  }

  .dashboard-card-interaction {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
}

@layer components {
  .staffly-phone {
    @apply flex items-stretch gap-2;
  }

  .staffly-phone .PhoneInputCountry {
    @apply relative flex items-center justify-center rounded-2xl border border-zinc-300 px-3 shadow-sm transition;
  }

  /* селект остаётся кликабельным, но визуально “чистый” */
  .staffly-phone .PhoneInputCountrySelect {
    @apply absolute inset-0 h-full w-full cursor-pointer opacity-0;
  }

  .staffly-phone .PhoneInputCountryIcon {
    @apply h-4 w-6 overflow-hidden rounded-sm;
  }

  /* ВАЖНО: 16px => iOS не зумит */
  .staffly-phone .PhoneInputInput {
    @apply w-full rounded-2xl border border-zinc-300 p-3 text-[16px] outline-none transition focus:ring-2 focus:ring-zinc-300;
  }

  /* disabled */
  .staffly-phone .PhoneInputInput:disabled {
    @apply bg-zinc-100;
  }

  /* error state */
  .staffly-phone.is-error .PhoneInputInput {
    @apply border-red-500 ring-red-200;
  }

  .staffly-phone.is-error .PhoneInputCountry {
    @apply border-red-500;
  }

  /* focus ring also highlights country block */
  .staffly-phone:has(.PhoneInputInput:focus) .PhoneInputCountry {
    @apply ring-2 ring-zinc-300;
  }

  /* focus+error => красный */
  .staffly-phone.is-error:has(.PhoneInputInput:focus) .PhoneInputCountry {
    @apply ring-red-200;
  }
}
